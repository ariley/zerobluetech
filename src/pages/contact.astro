---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { SITE_TITLE } from '../config';
---

<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
	<head>
		<BaseHead title="Contact - ZeroBlue" description="Get in touch with ZeroBlue Technology Solutions" />
	</head>
	<body class="bg-stone-50 dark:bg-stone-900">
		<Header />
		<main class="max-w-7xl mx-auto px-4 py-12">
			<!-- Hero Section -->
			<div class="text-center mb-16">
				<h1 class="text-4xl md:text-5xl font-bold mb-4 text-stone-700 dark:text-stone-300">Contact Us</h1>
				<p class="text-xl text-stone-600 dark:text-stone-300 max-w-3xl mx-auto">
					Get in touch with us to discuss your project or ask any questions.
				</p>
			</div>

			<div class="grid md:grid-cols-2 gap-12 mb-16">
				<!-- Contact Information -->
				<div>
					<h2 class="text-3xl font-bold mb-6 text-stone-700 dark:text-stone-300">Get In Touch</h2>
					
					<!-- Office Locations -->
					<div class="space-y-6 mb-8">
						<div class="bg-stone-50 dark:bg-stone-800 rounded-lg shadow-lg p-6">
							<h3 class="text-xl font-semibold mb-3 text-stone-700 dark:text-stone-300">California Office</h3>
							<p class="text-stone-700 dark:text-stone-400">
								2284 Filbert Street<br>
								Oakland, CA 94607<br>
								Tel: <a href="tel:2128428830" class="text-stone-700 dark:text-stone-300 hover:text-primary dark:hover:text-primary hover:underline">212 842-8830</a>
							</p>
						</div>

						<div class="bg-stone-50 dark:bg-stone-800 rounded-lg shadow-lg p-6">
							<h3 class="text-xl font-semibold mb-3 text-stone-700 dark:text-stone-300">New Jersey Office</h3>
							<p class="text-stone-700 dark:text-stone-400">
								4 Beacon Way, Suite 212<br>
								Jersey City, NJ 07304<br>
								Tel: <a href="tel:2012996223" class="text-stone-700 dark:text-stone-300 hover:text-primary dark:hover:text-primary hover:underline">201 299-6223</a>
							</p>
						</div>
					</div>

					<!-- Contact Methods -->
					<div class="bg-stone-50 dark:bg-stone-800 rounded-lg shadow-lg p-6">
						<h3 class="text-xl font-semibold mb-4 text-stone-700 dark:text-stone-300">Other Methods</h3>
						<div class="space-y-3">
							<div class="flex items-center gap-3">
								<span class="text-2xl">ðŸ“ž</span>
								<a href="tel:8779179079" class="text-stone-700 dark:text-stone-300 hover:text-primary dark:hover:text-primary hover:underline text-lg">877 917-9079</a>
							</div>
							<div class="flex items-center gap-3">
								<span class="text-2xl">ðŸ“§</span>
								<a href="mailto:info@zerobluetech.com" class="text-stone-700 dark:text-stone-300 hover:text-primary dark:hover:text-primary hover:underline">info@zerobluetech.com</a>
							</div>
						</div>
					</div>
				</div>

				<!-- Contact Form -->
				<div>
					<h2 class="text-3xl font-bold mb-6 text-stone-700 dark:text-stone-300">Send Us a Message</h2>

					<div class="bg-stone-50 dark:bg-stone-800 rounded-lg shadow-lg p-8">
						<form id="contact-form" class="space-y-6">
							<div>
								<label for="name" class="block text-sm font-medium text-stone-700 dark:text-stone-400 mb-2">
									Your Name (required)
								</label>
								<input
									type="text"
									id="name"
									name="name"
									required
									placeholder="Jane Doe"
									class="w-full px-4 py-2 border border-stone-300 dark:border-stone-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-stone-50 dark:bg-stone-700 text-stone-700 dark:text-stone-300 placeholder-stone-400 dark:placeholder-stone-500"
								>
							</div>

							<div>
								<label for="email" class="block text-sm font-medium text-stone-700 dark:text-stone-400 mb-2">
									Your Email (required)
								</label>
								<input
									type="email"
									id="email"
									name="email"
									required
									placeholder="janedoe@email.com"
									class="w-full px-4 py-2 border border-stone-300 dark:border-stone-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-stone-50 dark:bg-stone-700 text-stone-700 dark:text-stone-300 placeholder-stone-400 dark:placeholder-stone-500"
								>
							</div>

							<div>
								<label for="subject" class="block text-sm font-medium text-stone-700 dark:text-stone-400 mb-2">
									Subject (required)
								</label>
								<input
									type="text"
									id="subject"
									name="subject"
									required
									placeholder="Let us know how we can help you"
									class="w-full px-4 py-2 border border-stone-300 dark:border-stone-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-stone-50 dark:bg-stone-700 text-stone-700 dark:text-stone-300 placeholder-stone-400 dark:placeholder-stone-500"
								>
							</div>

							<div>
								<label for="message" class="block text-sm font-medium text-stone-700 dark:text-stone-400 mb-2">
									Your Message
								</label>
								<textarea
									id="message"
									name="message"
									rows="6"
									placeholder="Leave a comment..."
									class="w-full px-4 py-2 border border-stone-300 dark:border-stone-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent bg-stone-50 dark:bg-stone-700 text-stone-700 dark:text-stone-300 placeholder-stone-400 dark:placeholder-stone-500"
								></textarea>
							</div>

							<div class="cf-turnstile" data-sitekey={import.meta.env.PUBLIC_TURNSTILE_SITE_KEY} data-theme="auto"></div>

							<button
								type="submit"
								id="submit-btn"
								class="w-full bg-sky-400 text-stone-800 px-6 py-3 rounded-lg font-semibold hover:bg-sky-500 transition-colors"
							>
								Send Message
							</button>

							<p id="form-message" class="text-sm hidden"></p>
						</form>
					</div>
				</div>
			</div>

			<!-- Quick Links -->
			<section class="bg-gradient-to-r from-sky-400 to-sky-500 rounded-lg shadow-xl p-12 text-center text-stone-300">
				<h2 class="text-3xl font-bold mb-6">Quick Links</h2>
				<div class="flex flex-wrap justify-center gap-4">
					<a href="https://calendly.com/agnesriley" target="_blank" rel="noopener noreferrer" class="bg-stone-50 text-primary px-6 py-3 rounded-lg font-semibold hover:bg-stone-100 transition-colors">
						Book A Meeting
					</a>
					<a href="/contact" class="bg-stone-50 text-primary px-6 py-3 rounded-lg font-semibold hover:bg-stone-100 transition-colors">
						Buy Hours
					</a>
					<a href="/filemaker-licenses" class="bg-stone-50 text-primary px-6 py-3 rounded-lg font-semibold hover:bg-stone-100 transition-colors">
						Request FileMaker License Quote
					</a>
				</div>
			</section>
		</main>
		<Footer />

		<script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>

		<script>
			const form = document.getElementById('contact-form') as HTMLFormElement;
			const submitBtn = document.getElementById('submit-btn') as HTMLButtonElement;
			const messageEl = document.getElementById('form-message') as HTMLElement;

			form.addEventListener('submit', async (e) => {
				e.preventDefault();

				submitBtn.disabled = true;
				submitBtn.textContent = 'Sending...';
				messageEl.classList.add('hidden');

				const formData = new FormData(form);

				try {
					const turnstileResponse = formData.get('cf-turnstile-response');
					if (!turnstileResponse) {
						throw new Error('Please complete the captcha');
					}

					const response = await fetch('/api/contact', {
						method: 'POST',
						headers: { 'Content-Type': 'application/json' },
						body: JSON.stringify({
							name: formData.get('name'),
							email: formData.get('email'),
							subject: formData.get('subject'),
							message: formData.get('message'),
							turnstileToken: turnstileResponse
						})
					});

					const data = await response.json();

					messageEl.classList.remove('hidden', 'text-red-500', 'text-green-500');
					if (response.ok) {
						messageEl.classList.add('text-green-500');
						messageEl.textContent = 'Message sent successfully! We\'ll get back to you soon.';
						form.reset();
					} else {
						messageEl.classList.add('text-red-500');
						messageEl.textContent = data.error || 'Something went wrong. Please try again.';
					}
				} catch (error) {
					messageEl.classList.remove('hidden');
					messageEl.classList.add('text-red-500');
					messageEl.textContent = 'Something went wrong. Please try again.';
				} finally {
					submitBtn.disabled = false;
					submitBtn.textContent = 'Send Message';
				}
			});
		</script>
	</body>
</html>

