---
import PostFooter from "@/components/PostFooter.astro"
import { stripHTML, urlifyToken } from '@/js/util.js'

const { page, maxWords = 46, showFooter = false, articlePreview = false, showDate = true } = Astro.props
const { title, author, date, pubDate, permalink, tags, categories } = page.frontmatter
// Use pubDate if available, otherwise fall back to date
const postDate = pubDate || date
const formattedDate = new Date(postDate).toLocaleDateString(undefined, { year: 'numeric', month: 'long', day: 'numeric' })

---

<article class="border-b border-gray-200 dark:border-gray-700 pb-8 last:border-b-0">
  <header>
    <h2 class="text-2xl font-semibold mb-2">
      <a href={permalink} class="text-gray-900 dark:text-stone-300 hover:text-primary dark:hover:text-primary transition-colors no-underline" title={`Permalink to ${title}`} rel="bookmark">{title}</a>
    </h2>
    {showDate && postDate && (
      <div class="text-sm text-gray-600 dark:text-gray-400">
        <time datetime={postDate}>{formattedDate}</time>
      </div>
    )}
  </header>
</article>
