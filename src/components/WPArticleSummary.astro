---
import PostFooter from "@/components/PostFooter.astro"
import { stripHTML, urlifyToken } from '@/js/util.js'

const { page, maxWords = 46, showFooter = false, articlePreview = false, showDate = true } = Astro.props
const { title, author, date, pubDate, permalink, tags, categories } = page.frontmatter
// Use pubDate if available, otherwise fall back to date
const postDate = pubDate || date
const formattedDate = new Date(postDate).toLocaleDateString(undefined, { year: 'numeric', month: 'long', day: 'numeric' })

---

<article class="post type-post status-publish format-standard hentry">
  <header class="entry-header">
    <h2 class="entry-title">
      <a href={permalink} title={`Permalink to ${title}`} rel="bookmark">{title}</a>
    </h2>
    {showDate && postDate && (
      <div class="entry-meta">
        <time class="entry-date" datetime={postDate}>{formattedDate}</time>
      </div>
    )}
  </header>
</article>
